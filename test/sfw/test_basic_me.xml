<?xml version="1.0"?>
<test>
  <repeat count="1">
    <subtest>
      <desc>Test PtlMEAppend without init</desc>
      <arg_check>
        <ptl_me_append ret="NO_INIT"/>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEUnlink without init</desc>
      <arg_check>
        <ptl_me_unlink ret="NO_INIT"/>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMESearch without init</desc>
      <arg_check>
        <ptl_me_search ret="NO_INIT"/>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend on a no matching NI</desc>
      <arg_check>
        <ptl>
          <ptl_ni ni_opt="NO_MATCH PHYSICAL">
            <ptl_pt>
              <ptl_me_append me_opt="OP_PUT" uid="ANY" ret="ARG_INVALID"/>
            </ptl_pt>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMESearch on a no matching NI</desc>
      <arg_check>
        <ptl>
          <ptl_ni ni_opt="NO_MATCH PHYSICAL">
            <ptl_pt>
              <ptl_me_search me_opt="OP_PUT" uid="ANY" ret="ARG_INVALID"/>
            </ptl_pt>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend with unsupported options</desc>
      <arg_check>
        <ptl>
          <ptl_me_append me_opt="INVALID" ret="ARG_INVALID"/>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMESearch with unsupported options</desc>
      <arg_check>
        <ptl>
          <ptl_me_search me_opt="INVALID" ret="ARG_INVALID"/>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend with ni_handle = INVALID</desc>
      <arg_check>
        <ptl>
          <ptl_me_append ni_handle="INVALID" ret="ARG_INVALID"/>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMESearch with ni_handle = INVALID</desc>
      <arg_check>
        <ptl>
          <ptl_me_search ni_handle="INVALID" ret="ARG_INVALID"/>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend with no-match ni</desc>
      <arg_check>
        <ptl>
          <ptl_ni>
            <ptl_me_append ret="ARG_INVALID"/>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMESearch with no-match ni</desc>
      <arg_check>
        <ptl>
          <ptl_ni>
            <ptl_me_search ret="ARG_INVALID"/>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend with ct_handle = INVALID</desc>
      <arg_check>
        <ptl>
          <ptl_ni>
            <ptl_me_append ct_handle="INVALID" ret="ARG_INVALID"/>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend with ct from wrong ni</desc>
      <arg_check>
        <ptl>
          <ptl_ni ni_opt="NO_MATCH PHYSICAL">
            <ptl_ct>
              <ptl_ni>
                <ptl_pt pt_index="3">
                  <ptl_me_append pt_index="3" ret="ARG_INVALID">
                    <if err="OK">
                      <ptl_me_unlink/>
                    </if>
                  </ptl_me_append>
                </ptl_pt>
              </ptl_ni>
            </ptl_ct>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend with bad ptl_list(1)</desc>
      <arg_check>
        <ptl>
          <ptl_ni>
            <ptl_me_append list="INVALID" ret="ARG_INVALID"/>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend with bad ptl_list(2)</desc>
      <arg_check>
        <ptl>
          <ptl_ni>
            <ptl_me_append list="2" ret="ARG_INVALID"/>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMESearch with bad search_op(1)</desc>
      <arg_check>
        <ptl>
          <ptl_ni>
            <ptl_me_search search_op="INVALID" ret="ARG_INVALID"/>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMESearch with bad search_op(2)</desc>
      <arg_check>
        <ptl>
          <ptl_ni>
            <ptl_me_search search_op="2" ret="ARG_INVALID"/>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend with invalid pt_index = 0</desc>
      <arg_check>
        <ptl>
          <ptl_ni>
            <ptl_pt pt_index="3">
              <ptl_me_append pt_index="0" ret="ARG_INVALID"/>
            </ptl_pt>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend with invalid pt_index = out of range</desc>
      <arg_check>
        <ptl>
          <ptl_ni desired_max_pt_index="4">
            <check actual_max_pt_index="4"/>
            <ptl_pt pt_index="3">
              <ptl_me_append pt_index="5" ret="ARG_INVALID"/>
            </ptl_pt>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMESearch with invalid pt_index = 0</desc>
      <arg_check>
        <ptl>
          <ptl_ni>
            <ptl_pt pt_index="3">
              <ptl_me_search pt_index="0" ret="ARG_INVALID"/>
            </ptl_pt>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMESearch with invalid pt_index = out of range</desc>
      <arg_check>
        <ptl>
          <ptl_ni desired_max_pt_index="4">
            <check actual_max_pt_index="4"/>
            <ptl_pt pt_index="3">
              <ptl_me_search pt_index="5" ret="ARG_INVALID"/>
            </ptl_pt>
          </ptl_ni>
        </ptl>
      </arg_check>
    </subtest>
    <subtest>
      <desc>Test PtlMEAppend/Unlink with good parameters</desc>
      <ptl>
        <ptl_ni>
          <ptl_pt pt_index="3">
            <ptl_me pt_index="3"/>
          </ptl_pt>
        </ptl_ni>
      </ptl>
    </subtest>
  </repeat>
</test>
