<?xml version="1.0"?>
<test>
  <subtest>
    <desc>Test put le</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
        <ompi_rt>
          <ptl_eq>
            <ptl_pt>
              <ptl_le_append le_opt="OP_PUT" uid="ANY">
                <ptl_md>
                  <ptl_put target_id="SELF"/>
                  <ptl_eq_wait>
                    <check event_type="LINK"/>
                  </ptl_eq_wait>
                  <ptl_eq_wait>
                    <check event_type="PUT"/>
                  </ptl_eq_wait>
                  <ptl_eq_wait>
                    <check event_type="SEND"/>
                  </ptl_eq_wait>
                  <msleep time="50"/>
                  <ptl_eq_get ret="EQ_EMPTY"/>
                </ptl_md>
                <ptl_le_unlink/>
              </ptl_le_append>
            </ptl_pt>
          </ptl_eq>
        </ompi_rt>
      </ptl_ni>
    </ptl>
  </subtest>
  
  <subtest>
    <desc>Test put le with ack</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
        <ompi_rt>
          <ptl_eq>
            <ptl_pt>
              <ptl_le_append le_opt="OP_PUT" uid="ANY">
                <ptl_md>
                  <ptl_put target_id="SELF" ack_req="ACK"/>
                  <ptl_eq_wait>
                    <check event_type="LINK"/>
                  </ptl_eq_wait>
                  <ptl_eq_wait>
                    <check event_type="PUT"/>
                  </ptl_eq_wait>
                  <ptl_eq_wait>
                    <check event_type="SEND"/>
                  </ptl_eq_wait>
                  <ptl_eq_wait>
                    <check event_type="ACK"/>
                  </ptl_eq_wait>
                  <msleep time="50"/>
                  <ptl_eq_get ret="EQ_EMPTY"/>
                </ptl_md>
                <ptl_le_unlink/>
              </ptl_le_append>
            </ptl_pt>
          </ptl_eq>
        </ompi_rt>
      </ptl_ni>
    </ptl>
  </subtest>
  
  <subtest>
    <desc>Test put le with ack disabled</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
        <ompi_rt>
          <ptl_eq>
            <ptl_pt>
              <ptl_le_append le_opt="OP_PUT ACK_DISABLE" uid="ANY">
                <ptl_md>
                  <ptl_put target_id="SELF" ack_req="ACK"/>
                  <ptl_eq_wait>
                    <check event_type="LINK"/>
                  </ptl_eq_wait>
                  <ptl_eq_wait>
                    <check event_type="PUT"/>
                  </ptl_eq_wait>
                  <ptl_eq_wait>
                    <check event_type="SEND"/>
                  </ptl_eq_wait>
                  <msleep time="50"/>
                  <ptl_eq_get ret="EQ_EMPTY"/>
                </ptl_md>
                <ptl_le_unlink/>
              </ptl_le_append>
            </ptl_pt>
          </ptl_eq>
        </ompi_rt>
      </ptl_ni>
    </ptl>
  </subtest>
  
</test>

