<?xml version="1.0"?>
<test>
  <repeat count="2">
  <subtest>
    <desc>Test ct events with put to me</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK">
		  <ptl_put ack_req="CT_ACK" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="2" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with put to me, no CT_COMM</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK">
		  <ptl_put ack_req="CT_ACK" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="0" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="2" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with put to me, no CT_SEND</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_ACK">
		  <ptl_put ack_req="CT_ACK" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with put to me, no CT_ACK</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
		  <ptl_put ack_req="CT_ACK" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with put to me with CT_BYTES</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT CT_COMM CT_BYTES" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK CT_BYTES">
		  <ptl_put length="10" ack_req="CT_ACK" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="10" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="20" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with get to me</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_REPLY">
		  <ptl_get match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with get to me, no CT_COMM</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_GET" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_REPLY">
		  <ptl_get match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="0" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with get to me, no CT_REPLY</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md>
		  <ptl_get match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="0" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with get to me with CT_BYTES</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_GET CT_COMM CT_BYTES" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_REPLY CT_BYTES">
		  <ptl_get length="10" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="10" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="10" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with atomic to me</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK">
		  <ptl_atomic atom_op="LXOR" ack_req="CT_ACK" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="2" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with atomic to me, no CT_COMM</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK">
		  <ptl_atomic atom_op="LXOR" ack_req="CT_ACK" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="0" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="2" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with atomic to me, no CT_SEND</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_ACK">
		  <ptl_atomic atom_op="LXOR" ack_req="CT_ACK" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with atomic to me, no CT_ACK</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
		  <ptl_atomic atom_op="LXOR" ack_req="CT_ACK" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with atomic to me with CT_BYTES</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM CT_BYTES" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK CT_BYTES">
		  <ptl_atomic length="10" atom_op="LXOR" ack_req="CT_ACK" match="0x5aa5" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="10" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="20" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with fetch atomic to me</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_fetch atom_op="LXOR" match="0x5aa5" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with fetch atomic to me, no CT_COMM</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_fetch atom_op="LXOR" match="0x5aa5" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with fetch atomic to me, no CT_SEND</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md>
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_fetch atom_op="LXOR" match="0x5aa5" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with fetch atomic to me, no CT_REPLY</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md>
		      <ptl_fetch atom_op="LXOR" match="0x5aa5" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with fetch atomic to me with CT_BYTES</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM CT_BYTES" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_BYTES">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY CT_BYTES">
		      <ptl_fetch length="10" atom_op="LXOR" match="0x5aa5" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with swap to me</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_swap atom_op="SWAP" match="0x5aa5" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with swap to me, no CT_COMM</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_swap atom_op="SWAP" match="0x5aa5" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with swap to me, no CT_SEND</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md>
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_swap atom_op="SWAP" match="0x5aa5" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with swap to me, no CT_REPLY</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md>
		      <ptl_swap atom_op="SWAP" match="0x5aa5" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with swap to me with CT_BYTES</desc>
    <ptl>
      <ptl_ni>
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_me me_opt="OP_PUT OP_GET CT_COMM CT_BYTES" uid="ANY" pt_index="2" me_match="0xa5a5" me_ignore="0xff00">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_BYTES">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY CT_BYTES">
		      <ptl_swap length="10" atom_op="SWAP" match="0x5aa5" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_me>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with put to le</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK">
		  <ptl_put ack_req="CT_ACK" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="2" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with put to le, no CT_COMM</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK">
		  <ptl_put ack_req="CT_ACK" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="0" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="2" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with put to le, no CT_SEND</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_ACK">
		  <ptl_put ack_req="CT_ACK" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with put to le, no CT_ACK</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
		  <ptl_put ack_req="CT_ACK" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with put to le with CT_BYTES</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT CT_COMM CT_BYTES" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK CT_BYTES">
		  <ptl_put length="10" ack_req="CT_ACK" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="10" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="20" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with get to le</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_REPLY">
		  <ptl_get pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with get to le, no CT_COMM</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_GET" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_REPLY">
		  <ptl_get pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="0" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with get to le, no CT_REPLY</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md>
		  <ptl_get pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="0" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with get to le with CT_BYTES</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_GET CT_COMM CT_BYTES" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_REPLY CT_BYTES">
		  <ptl_get length="10" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="10" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="10" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with atomic to le</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK">
		  <ptl_atomic atom_op="LXOR" ack_req="CT_ACK" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="2" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with atomic to le, no CT_COMM</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK">
		  <ptl_atomic atom_op="LXOR" ack_req="CT_ACK" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="0" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="2" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with atomic to le, no CT_SEND</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_ACK">
		  <ptl_atomic atom_op="LXOR" ack_req="CT_ACK" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with atomic to le, no CT_ACK</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
		  <ptl_atomic atom_op="LXOR" ack_req="CT_ACK" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="1" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with atomic to le with CT_BYTES</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM CT_BYTES" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_ACK CT_BYTES">
		  <ptl_atomic length="10" atom_op="LXOR" ack_req="CT_ACK" pt_index="2"/>
		  <msleep count="10"/>
		  <ptl_ct_get ct_handle="ct[0]">
		    <check ct_event_success="10" ct_event_failure="0"/>
		  </ptl_ct_get>
		  <ptl_ct_get ct_handle="ct[1]">
		    <check ct_event_success="20" ct_event_failure="0"/>
		  </ptl_ct_get>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with fetch atomic to le</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_fetch atom_op="LXOR" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with fetch atomic to le, no CT_COMM</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_fetch atom_op="LXOR" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with fetch atomic to le, no CT_SEND</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md>
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_fetch atom_op="LXOR" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with fetch atomic to le, no CT_REPLY</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md>
		      <ptl_fetch atom_op="LXOR" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with fetch atomic to le with CT_BYTES</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM CT_BYTES" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_BYTES">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY CT_BYTES">
		      <ptl_fetch length="10" atom_op="LXOR" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with swap to le</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_swap atom_op="SWAP" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with swap to le, no CT_COMM</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_swap atom_op="SWAP" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with swap to le, no CT_SEND</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md>
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY">
		      <ptl_swap atom_op="SWAP" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with swap to le, no CT_REPLY</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND">
	          <ptl_ct>
		    <ptl_md>
		      <ptl_swap atom_op="SWAP" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="1" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="0" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  <subtest>
    <desc>Test ct events with swap to le with CT_BYTES</desc>
    <ptl>
      <ptl_ni ni_opt="NO_MATCH PHYSICAL">
	<ptl_ct>
	  <ptl_pt pt_index="2">
	    <ptl_le le_opt="OP_PUT OP_GET CT_COMM CT_BYTES" uid="ANY" pt_index="2">
	      <ptl_ct>
		<ptl_md md_opt="CT_SEND CT_BYTES">
	          <ptl_ct>
		    <ptl_md md_opt="CT_REPLY CT_BYTES">
		      <ptl_swap length="10" atom_op="SWAP" pt_index="2"/>
		      <msleep count="10"/>
		      <ptl_ct_get ct_handle="ct[0]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[1]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
		      <ptl_ct_get ct_handle="ct[2]">
		        <check ct_event_success="10" ct_event_failure="0"/>
		      </ptl_ct_get>
	            </ptl_md>
	          </ptl_ct>
	        </ptl_md>
	      </ptl_ct>
	    </ptl_le>
	  </ptl_pt>
	</ptl_ct>
      </ptl_ni>
    </ptl>
  </subtest>
  </repeat>
</test>
